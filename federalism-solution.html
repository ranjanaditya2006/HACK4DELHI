<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NIRVACHANNEX – Federal Safeguard Engine</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="ui-system.css" />
  <style>
    /* ===== Overall layout ===== */
    .fs-grid {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px 16px 24px;
      box-sizing: border-box;
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 18px;
    }
    @media (max-width: 900px) {
      .fs-grid {
        grid-template-columns: 1fr;
      }
    }

    /* ===== Left: Controls ===== */
    .fs-controls {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .fs-header-block {
      margin-bottom: 4px;
    }
    .fs-header-title {
      font-size: 1rem;
      margin-bottom: 2px;
      color: #ffffff;
    }
    .fs-header-text {
      font-size: 0.8rem;
      color: rgba(192, 206, 255, 0.75);
      line-height: 1.4;
    }

    .fs-toggle-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 9px 10px;
      border-radius: 12px;
      background: rgba(23, 18, 52, 0.72);
      border: 1px solid rgba(120, 129, 255, 0.32);
      box-shadow: 0 6px 20px rgba(4, 10, 38, 0.5);
      gap: 10px;
    }

    .fs-toggle-text {
      flex: 1;
      min-width: 0;
    }
    .fs-toggle-label {
      font-size: 0.84rem;
      color: rgba(244, 248, 255, 0.95);
      margin-bottom: 1px;
    }
    .fs-toggle-sub {
      font-size: 0.76rem;
      color: rgba(192, 206, 255, 0.7);
      line-height: 1.3;
    }

    /* neon toggle switch – purple / cyan */
    .fs-switch {
      position: relative;
      display: inline-block;
      width: 44px;
      height: 22px;
      flex-shrink: 0;
    }
    .fs-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .fs-slider {
      position: absolute;
      cursor: pointer;
      inset: 0;
      background: linear-gradient(135deg, #271c5a, #1a233a);
      border-radius: 34px;
      box-shadow: 0 0 0 1px rgba(120, 129, 255, 0.5);
      transition: 0.25s ease;
    }
    .fs-slider::before {
      content: "";
      position: absolute;
      height: 16px;
      width: 16px;
      left: 3px;
      bottom: 3px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #ffffff, #b5dcff);
      box-shadow: 0 0 8px rgba(117, 255, 244, 0.55);
      transition: 0.25s ease;
    }
    .fs-switch input:checked + .fs-slider {
      background: linear-gradient(135deg, #6b4eff, #26ffe3);
      box-shadow: 0 0 10px rgba(124, 255, 252, 0.65);
    }
    .fs-switch input:checked + .fs-slider::before {
      transform: translateX(20px);
      box-shadow: 0 0 12px rgba(187, 255, 255, 0.95);
    }

    .fs-kernel {
      margin-top: 4px;
      padding: 9px 10px;
      border-radius: 10px;
      background: rgba(19, 26, 68, 0.78);
      border: 1px solid rgba(111, 124, 255, 0.32);
      font-size: 0.74rem;
      color: rgba(190, 205, 255, 0.86);
      line-height: 1.4;
    }
    .fs-kernel strong {
      color: #6fffe9;
      font-weight: 600;
    }

    /* ===== Right: Impact matrix ===== */
    .fs-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.72rem;
      font-weight: 600;
      letter-spacing: 0.02em;
      background: rgba(42, 22, 95, 0.9);
      border: 1px solid rgba(143, 147, 255, 0.6);
      color: rgba(216, 222, 255, 0.9);
      white-space: nowrap;
    }
    .fs-pill-good {
      background: rgba(44, 255, 210, 0.12);
      border-color: #5cffea;
      color: #b7fff6;
    }
    .fs-pill-bad {
      background: rgba(255, 107, 130, 0.14);
      border-color: #ff6b81;
      color: #ffd4de;
    }

    .fs-matrix {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      margin-top: 6px;
    }
    .fs-matrix th,
    .fs-matrix td {
      padding: 6px 6px;
      border-bottom: 1px solid rgba(146, 158, 255, 0.16);
      vertical-align: top;
    }
    .fs-matrix th {
      text-align: left;
      font-weight: 600;
      color: rgba(209, 218, 255, 0.76);
      font-size: 0.78rem;
    }
    .fs-matrix td {
      color: rgba(220, 229, 255, 0.78);
    }
    .fs-matrix td.fs-center {
      text-align: center;
      width: 74px;
      color: #e4ecff;
      white-space: nowrap;
    }

    /* ===== Federal score block (centered) ===== */
    .fs-score-block {
      margin-top: 10px;
      text-align: center;
    }

    .fs-score-chip {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 6px 14px;
      border-radius: 999px;
      font-size: 0.78rem;
      max-width: 100%;
      box-sizing: border-box;
    }
    .fs-score-chip span:first-child {
      font-weight: 600;
      color: #f4f7ff;
      white-space: nowrap;
    }
    .fs-score-chip span:last-child {
      color: rgba(215, 228, 255, 0.9);
    }
    .fs-score-good {
      background: linear-gradient(135deg, rgba(135, 255, 248, 0.18), rgba(114, 143, 255, 0.2));
      border: 1px solid rgba(145, 255, 246, 0.85);
    }
    .fs-score-mid {
      background: linear-gradient(135deg, rgba(255, 214, 102, 0.18), rgba(255, 157, 77, 0.16));
      border: 1px solid rgba(255, 214, 122, 0.85);
    }
    .fs-score-bad {
      background: linear-gradient(135deg, rgba(255, 118, 148, 0.2), rgba(143, 76, 112, 0.22));
      border: 1px solid rgba(255, 134, 155, 0.9);
    }

    .fs-scale-note {
      margin-top: 6px;
      font-size: 0.74rem;
      color: rgba(189, 201, 255, 0.8);
      white-space: nowrap;
    }
    @media (max-width: 480px) {
      .fs-scale-note {
        white-space: normal;
      }
    }

    .fs-footnote {
      margin-top: 10px;
      font-size: 0.78rem;
      color: rgba(199, 211, 255, 0.8);
    }
    .fs-footnote strong {
      color: #9d8cff;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <!-- Header -->
    <header class="app-header">
      <div class="brand-block">
        <div class="brand-logo">
          <img src="nirvachan logo.jpg" alt="NirvachanNex logo" />
        </div>
        <div>
          <div class="brand-text-main">NIRVACHANNEX</div>
          <div class="brand-text-sub">ONE NATION . ONE ELECTION</div>
        </div>
      </div>
      <nav class="app-nav">
        <a class="nav-pill nav-active" href="overview.html">Overview</a>
        <a class="nav-pill nav-active" href="governance.html">Governance</a>
        <a class="nav-pill nav-active" href="administrative.html">Administrative</a>
        <a class="nav-pill nav-active" href="financial.html">Financial</a>
        <a class="nav-pill nav-active" href="constitutional.html">Constitutional</a>
        <a href="delhi.html" class="nav-pill nav-active">Delhi Model</a>
        <a class="nav-pill nav-active" href="stakeholders.html">Stakeholders</a>
        <a class="nav-pill nav-active" href="federalism-solution.html">Federal Model </a>
        <a class="nav-pill nav-active" href="hung-assembly-solution.html">Fallback</a>
      </nav>
    </header>

    <!-- Main -->
    <main class="fs-grid">
      <!-- LEFT: Rule builder -->
      <section class="glass-panel-soft fs-controls">
        <div class="fs-header-block">
          <div class="fs-header-title">Build the safeguard package</div>
          <p class="fs-header-text">
            Toggle ONOE and stack purple‑cyan safeguards so that Delhi’s State‑List powers remain autonomous
            even when elections are synchronised.
          </p>
        </div>

        <div class="fs-toggle-row">
          <div class="fs-toggle-text">
            <div class="fs-toggle-label">Enable One Nation One Election (ONOE)</div>
            <div class="fs-toggle-sub">
              Locks Lok Sabha and Assemblies into a shared election cycle.
            </div>
          </div>
          <label class="fs-switch">
            <input type="checkbox" id="onoe-toggle" checked />
            <span class="fs-slider"></span>
          </label>
        </div>

        <div class="fs-toggle-row">
          <div class="fs-toggle-text">
            <div class="fs-toggle-label">Shield State‑List subjects in synced terms</div>
            <div class="fs-toggle-sub">
              Freezes Parliament’s override on State‑List entries (including Delhi) except in narrowly‑defined emergencies.
            </div>
          </div>
          <label class="fs-switch">
            <input type="checkbox" id="shield-toggle" checked />
            <span class="fs-slider"></span>
          </label>
        </div>

        <div class="fs-toggle-row">
          <div class="fs-toggle-text">
            <div class="fs-toggle-label">Constructive no‑confidence only</div>
            <div class="fs-toggle-sub">
              Delhi’s government falls only if a replacement majority is named, limiting Centre‑driven regime churn.
            </div>
          </div>
          <label class="fs-switch">
            <input type="checkbox" id="cnc-toggle" checked />
            <span class="fs-slider"></span>
          </label>
        </div>

        <div class="fs-toggle-row">
          <div class="fs-toggle-text">
            <div class="fs-toggle-label">Tighten Art. 356 & ordinance use</div>
            <div class="fs-toggle-sub">
              Blocks President’s Rule or ordinances from being used just to keep ONOE cycles neat; requires strict, reviewable grounds.
            </div>
          </div>
          <label class="fs-switch">
            <input type="checkbox" id="ordinance-toggle" checked />
            <span class="fs-slider"></span>
          </label>
        </div>

        <div class="fs-toggle-row">
          <div class="fs-toggle-text">
            <div class="fs-toggle-label">Pre‑announced tenure bands</div>
            <div class="fs-toggle-sub">
              Uses variable but known term windows instead of ad‑hoc curtailment or extension for cycle‑management.
            </div>
          </div>
          <label class="fs-switch">
            <input type="checkbox" id="tenure-toggle" checked />
            <span class="fs-slider"></span>
          </label>
        </div>

        <button class="scenario-btn scenario-btn-active"
                style="width:100%;justify-content:center;margin-top:3px;"
                onclick="recomputeFederalScore()">
          Recalculate federal score
        </button>

        <div class="fs-kernel">
          IF <strong>ONOE = ON</strong> AND <strong>Subject = State‑List</strong> AND
          <strong>Shield = ON</strong> ⟶ Central override is paused for the term;
          Delhi exercises real control over its State‑List domain.
        </div>
      </section>

      <!-- RIGHT: Impact matrix -->
      <section class="glass-panel">
        <div class="panel-glow"></div>

        <div class="panel-header">
          <div class="panel-title-block">
            <div class="panel-title">Delhi federalism impact matrix</div>
            <div class="panel-subtitle">
              Four tests score whether your ONOE + safeguard stack respects the spirit of asymmetric federalism.
            </div>
          </div>
          <div id="fs-overall-pill" class="fs-pill fs-pill-good">
            Overall: Federal‑compatible
          </div>
        </div>

        <table class="fs-matrix">
          <thead>
            <tr>
              <th>Test</th>
              <th class="fs-center">Score</th>
              <th>Explanation</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>State‑List autonomy (Delhi)</td>
              <td id="cell-autonomy-score" class="fs-center">8.0 / 10</td>
              <td id="cell-autonomy-text">
                Shield is ON: Parliament’s override is frozen in synced terms; Delhi controls police, land‑linked and local subjects.
              </td>
            </tr>
            <tr>
              <td>Asymmetric status under Art. 239AA</td>
              <td id="cell-asymmetry-score" class="fs-center">8.0 / 10</td>
              <td id="cell-asymmetry-text">
                Dual governance keeps substance; the Assembly is not reduced to a municipal body in a national wave.
              </td>
            </tr>
            <tr>
              <td>Risk of political engineering by Centre</td>
              <td id="cell-engineering-score" class="fs-center">3.0 / 10</td>
              <td id="cell-engineering-text">
                Constructive no‑confidence plus tight 356/ordinance tests make it hard to topple or time Delhi just to suit cycles.
              </td>
            </tr>
            <tr>
              <td>Voter mandate clarity</td>
              <td id="cell-mandate-score" class="fs-center">7.0 / 10</td>
              <td id="cell-mandate-text">
                Pre‑announced tenure bands and shield help voters separate city‑state issues from national ones even on the same polling day.
              </td>
            </tr>
          </tbody>
        </table>

        <div class="fs-score-block">
          <div id="fs-score-chip" class="fs-score-chip fs-score-good">
            <span id="fs-score-label">Overall federal score: 7.8 / 10</span>
            <span id="fs-score-comment">ONOE design looks safe with this safeguard stack.</span>
          </div>
          <div class="fs-scale-note">
            0–3: unitary tilt · 3–7: fragile · 7–10: compatible
          </div>
        </div>

        <div class="fs-footnote">
          <strong>Reading guide:</strong>
          the engine treats ONOE as acceptable for Delhi only when State‑List autonomy stays substantive,
          term‑engineering is rule‑bound, and emergency powers cannot be misused as a cycle‑management tool.
        </div>
      </section>
    </main>

    <footer>© 2025 NirvachanNex – Federal Safeguard Engine</footer>
  </div>

  <div id="chart-tooltip"></div>

  <script>
    function clamp01(x) { return Math.max(0, Math.min(10, x)); }

    function recomputeFederalScore() {
      const onoe      = document.getElementById('onoe-toggle').checked;
      const shield    = document.getElementById('shield-toggle').checked;
      const cnc       = document.getElementById('cnc-toggle').checked;
      const ordinance = document.getElementById('ordinance-toggle').checked;
      const tenure    = document.getElementById('tenure-toggle').checked;

      // base scores in 0–10
      let autonomy = 2, asym = 2, engineering = 8, mandate = 4;

      if (!onoe) {
        // no ONOE – status quo
        autonomy = 6;
        asym = 7;
        engineering = 5;
        mandate = 5;
      } else {
        autonomy += shield ? 5 : 1;
        asym     += shield ? 4 : 1;

        if (cnc)       engineering -= 3;
        if (ordinance) engineering -= 2;

        mandate += tenure ? 3 : 1;
      }

      autonomy    = clamp01(autonomy);
      asym        = clamp01(asym);
      engineering = clamp01(engineering);
      mandate     = clamp01(mandate);

      // overall in 0–10
      const overall = clamp01((autonomy + asym + (10 - engineering) + mandate) / 4);

      // update matrix numeric cells
      document.getElementById('cell-autonomy-score').textContent    = autonomy.toFixed(1)    + " / 10";
      document.getElementById('cell-asymmetry-score').textContent   = asym.toFixed(1)        + " / 10";
      document.getElementById('cell-engineering-score').textContent = engineering.toFixed(1) + " / 10";
      document.getElementById('cell-mandate-score').textContent     = mandate.toFixed(1)     + " / 10";

      // update explanatory text
      document.getElementById('cell-autonomy-text').textContent = shield
        ? "Shield is ON: Parliament’s override is frozen in synced terms; Delhi keeps meaningful control over police, land‑linked and local subjects."
        : "Shield is OFF: with ONOE live, Parliament’s existing supremacy over Delhi’s State‑List space becomes structurally entrenched.";

      document.getElementById('cell-engineering-text').textContent = (cnc || ordinance)
        ? "Safeguards constrain President’s Rule and ordinances and require constructive alternatives, sharply cutting engineering risk."
        : "Without tight limits on Art. 356 and ordinances, ONOE can incentivise using Delhi’s asymmetric status for cycle‑management.";

      // overall chip + pill
      const chip    = document.getElementById('fs-score-chip');
      const label   = document.getElementById('fs-score-label');
      const comment = document.getElementById('fs-score-comment');
      const pill    = document.getElementById('fs-overall-pill');

      label.textContent = "Overall federal score: " + overall.toFixed(1) + " / 10";

      chip.classList.remove('fs-score-good','fs-score-mid','fs-score-bad');
      pill.classList.remove('fs-pill-good','fs-pill-bad');

      if (overall < 3.5) {
        chip.classList.add('fs-score-bad');
        pill.classList.add('fs-pill-bad');
        pill.textContent = "Overall: Unitary tilt";
        comment.textContent = "ONOE design is federally unsafe; Delhi’s asymmetric autonomy is structurally hollowed out.";
      } else if (overall < 7) {
        chip.classList.add('fs-score-mid');
        pill.classList.add('fs-pill-bad');
        pill.textContent = "Overall: Fragile compromise";
        comment.textContent = "Some guardrails exist, but asymmetric federalism remains vulnerable under this ONOE setup.";
      } else {
        chip.classList.add('fs-score-good');
        pill.classList.add('fs-pill-good');
        pill.textContent = "Overall: Federal‑compatible";
        comment.textContent = "With this safeguard stack, ONOE co‑exists with a real, separate Delhi mandate.";
      }
    }

    recomputeFederalScore();
  </script>
</body>
</html>
